<%
  notifications = current_user.notifications
  active = notifications.length > 0
%>
<li class="dropdown">
  <a href="#" class="dropdown-toggle notification-button <%= 'unread-notifications' if active %>" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
    <%= "(#{current_user.notifications.length})" if active %> <span class="caret"></span>
  </a>
  <ul class="dropdown-menu notifications-menu">
    <div class="notification-heading"><h4 class="menu-title">Notifications</h4></div>
    <li class="divider"></li>
    <div class="notifications-wrapper">
      <% notifications.each do |n| %>
        <div class="notification-item">
          <b><%= n.activity.user.username %></b>
          <%= "#{n.activity.activity_type} '#{truncate(n.activity.actable.paper.title)}' to" %>
          <b><%= "'#{n.activity.actable.list.name}'" %></b>
        </div>
        <li class="divider"></li>
      <% end %>
      <div class="notification-item">
        <a>see all</a>
      </div>
    </div>
  </ul>
</li>